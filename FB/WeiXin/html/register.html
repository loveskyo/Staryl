<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="stylesheets/bootstrap.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrapValidator/bootstrapValidator.min.js"></script>
    <script src="js/bootstrapValidator/zh_CN.js"></script>
</head>

<body>
    <header class="top-nav clearfix">
        <a class="dlt-a pull-left" href="javascript:void(0);"><i class="icon icon-back"></i><span>返回</span></a>
        <h4>免费注册</h4>
    </header>

    <div class="logo">
        <div>
            <a href="index.html"><img src="images/logo.png" width="25%" alt="小童星"></a>
        </div>
        <div class="logo-nm"><img src="images/logo-nm.png" width="15%" alt="小童星"></div>
    </div> 
    <div class="container">
        <form id="registerForm" method="post" action="http://localhost:12979/api/Register" class="form-horizonal login-form">
            <div class="form-group">
                <select class="form-control" name="UserType" data-bv-field="identify">
                    <option value="">请选择您的身份</option>
                    <option value="1">个人用户</option>
                    <option value="2">机构用户</option>
                </select>
            </div>
            <div class="form-group">
                <input type="text" class="form-control" name="recommender " placeholder="推荐人">
            </div>
            <div class="form-group">
                <input type="text" class="form-control" name="Mobile" data-bv-field="mobile" placeholder="请输入您的手机号码">
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-xs-8">
                        <input type="text" class="form-control" name="MobileYzm" data-bv-field="chkcode" placeholder="请输入验证码">
                    </div>
                    <div class="col-xs-4">
                        <a class="btn btn-block btn-blue" href="###">获取验证码</a>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <input type="password" class="form-control" name="Password" data-bv-field="password" placeholder="设置密码">
            </div>
            <div class="form-group">
                <input type="password" class="form-control" name="confirmPassword" data-bv-field="confirmPassword" placeholder="请再次输入密码">
            </div>
            <p class="help-block text-center">点击注册即表示同意<a href="###" class="cue-a">《童星用户协议》</a></p>
            <button type="submit" class="btn btn-block btn-primary btn-lg">提交</button>
        </form>
    </div>
    <script type="text/javascript">
        $(function () {
            // 提交验证
            $('#registerForm').bootstrapValidator({
                message: '',
                feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                fields: {
                    UserType: {
                        validators: {
                            notEmpty: {
                                message: '身份选项不能为空'
                            }
                        }
                    },
                    Mobile: {
                        validators: {
                            notEmpty: {
                                message: '手机号码不能为空'
                            },
                            phone: {
                                message: '请正确填写手机号码',
                                country: 'CN'
                            }

                        }
                    },
                    MobileYzm: {
                        validators: {
                            notEmpty: {
                                message: '验证码不能为空'
                            }
                        }
                    },
                    Password: {
                        validators: {
                            notEmpty: {
                                message: '密码不能为空'
                            },
                            identical: {
                                field: 'confirmPassword',
                                message: '必须和确认密码一致'
                            }
                        }
                    },
                    confirmPassword: {
                        validators: {
                            notEmpty: {
                                message: '密码不能为空'
                            },
                            identical: {
                                field: 'Password',
                                message: '请设置密码一致'
                            }
                        }
                    }
                }
            }).on('success.form.bv', function (e) {
                // Prevent form submission
                e.preventDefault();

                // Get the form instance
                var $form = $(e.target);

                // Get the BootstrapValidator instance
                var bv = $form.data('bootstrapValidator');

                // Use Ajax to submit form data
                $.post($form.attr('action'), $form.serialize(), function (result) {
                    console.log(result);
                    if (!result.IsError) {
                        location = result.Msg;
                    } else {
                        Modal.alert({
                            msg: result.Msg
                        }).on(function (e) {
                            $("#account").focus();
                        });
                    }
                }, 'json');
            });
        });
    </script>
</body>

</html>
